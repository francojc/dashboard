<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="refresh" content="{{ config.refresh_interval | default(900) }}">
    <title>Dashboard</title>
    <link rel="stylesheet" href="/static/styles.css">
    <style>
        /* Inline critical CSS for faster initial render */
        body {
            margin: 0;
            padding: 0;
            background-color: #0a0a0a;
            color: #e0e0e0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- Weather Widget -->
        <section class="widget weather-widget">
            {% if weather %}
            <div class="weather-content">
                <div class="weather-main">
                    <img src="https://openweathermap.org/img/wn/{{ weather.icon }}@4x.png" 
                         alt="{{ weather.description }}" class="weather-icon">
                    <div class="weather-temp">
                        <span class="temp-value">{{ weather.temp }}°</span>
                        <span class="temp-unit">C</span>
                    </div>
                </div>
                <div class="weather-details">
                    <p class="weather-description">{{ weather.description }}</p>
                    <div class="weather-stats">
                        <span>Feels like {{ weather.feels_like }}°</span>
                        <span>Humidity {{ weather.humidity }}%</span>
                        <span>Wind {{ weather.wind_speed }} km/h</span>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="no-data">
                <p>Weather data unavailable</p>
            </div>
            {% endif %}
        </section>

        <!-- Calendar Widget -->
        <section class="widget calendar-widget">
            <h2 class="widget-title">Today's Schedule</h2>
            {% if events %}
            <ul class="event-list">
                {% for event in events %}
                <li class="event-item">
                    <span class="event-time">{{ event.start }}{% if event.end %} - {{ event.end }}{% endif %}</span>
                    <span class="event-summary">{{ event.summary }}</span>
                </li>
                {% endfor %}
            </ul>
            {% else %}
            <div class="no-data">
                <p>No events scheduled</p>
            </div>
            {% endif %}
        </section>

        <!-- News Feed Widget -->
        <section class="widget news-widget">
            <h2 class="widget-title">Latest News</h2>
            {% if articles %}
            <div class="news-grid">
                {% for article in articles %}
                <article class="news-item">
                    <h3 class="news-source">{{ article.source }}</h3>
                    <p class="news-title">{{ article.title }}</p>
                    {% if article.summary %}
                    <p class="news-summary">{{ article.summary }}</p>
                    {% endif %}
                </article>
                {% endfor %}
            </div>
            {% else %}
            <div class="no-data">
                <p>No news articles available</p>
            </div>
            {% endif %}
        </section>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <p>Last updated: {{ last_updated }}</p>
        </footer>
    </div>
</body>
</html>